{% load static %}
<!-- Format keep -->
{%load crispy_forms_tags %}
<!-- Format keep -->
{% include 'chinhsua_modal.html' %}
<!-- Format keep -->
{% include "xacnhanxoact_modal.html" %}
<!-- Format keep -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    />
    <link rel="stylesheet" href="../static/css/quanly.css" />
    <title>Trang chủ | Quản lý thiết bị</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-md" style="background-color: #e6e6e6">
      <button
        class="navbar-toggler navbar-toggler-right"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand" href="#">
        <img
          src="{% static 'imgs/logo.png' %}"
          width="40"
          height="30"
          class="d-inline-block align-top"
          alt=""
        />
        <span style="font-weight: bold; color: black">Công Ty T&B |</span>
      </a>
      <!-- Site map -->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{% url 'QLthietbi_app:render_trangchinh' %}"
            ><i class="fa fa-home" aria-hidden="true"></i> Quản lý thiết bị</a
          >
        </li>
        <li class="breadcrumb-item active" aria-current="page">
          Thông tin thiết bị
        </li>
      </ol>
      <!-- Site map end -->
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle bg-dark"
              href="#"
              id="navbarDropdownMenuLink"
              data-toggle="dropdown"
            >
              <span class="ml-2" style="color: white"
                >Xin chào, {{user.username}}</span
              >
            </a>
            <div
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="navbarDropdownMenuLink"
            >
              <a
                class="dropdown-item"
                href="{% url 'QLthietbi_app:perform_logout' %}"
                >Đăng xuất</a
              >
            </div>
          </li>
        </ul>
      </div>
    </nav>
    <!-- NavBar END -->
    <!-- Bootstrap row -->
    <div class="row" id="body-row">
      <!-- Sidebar -->
      <div
        id="sidebar-container"
        class="sidebar-expanded d-none d-md-block col-2"
      >
        <!-- d-* hiddens the Sidebar in smaller devices. Its itens can be kept on the Navbar 'Menu' -->
        <!-- Bootstrap List Group -->
        <ul class="list-group sticky-top sticky-offset">
          <!-- Separator with title -->
          <li
            class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed"
          >
            <small>TRANG CHỦ</small>
          </li>
          <!-- /END Separator -->
          <!-- Menu with submenu -->
          <a
            href="#submenu1"
            data-toggle="collapse"
            aria-expanded="false"
            class="bg-dark list-group-item list-group-item-action flex-column align-items-start"
          >
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span class="fa fa-dashboard fa-fw mr-3"></span>
              <span class="menu-collapsed">Quản lý</span>
              <span class="submenu-icon ml-auto"></span>
            </div>
          </a>
          <!-- Submenu content -->
          <div id="submenu1" class="collapse sidebar-submenu">
            <a
              href="{% url 'QLthietbi_app:render_trangchinh' %}"
              class="list-group-item list-group-item-action bg-dark text-white"
            >
              <span class="menu-collapsed">Thiết bị</span>
            </a>
            <a
              href="#"
              class="list-group-item list-group-item-action bg-dark text-white"
            >
              <span class="menu-collapsed">Phòng</span>
            </a>
            <a
              href="#"
              class="list-group-item list-group-item-action bg-dark text-white"
            >
              <span class="menu-collapsed">Báo cáo</span>
            </a>
          </div>
          <a
            href="#submenu2"
            data-toggle="collapse"
            aria-expanded="false"
            class="bg-dark list-group-item list-group-item-action flex-column align-items-start"
          >
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span class="fa fa-user fa-fw mr-3"></span>
              <span class="menu-collapsed">Hồ sơ cá nhân</span>
              <span class="submenu-icon ml-auto"></span>
            </div>
          </a>
          <!-- Submenu content -->
          <div id="submenu2" class="collapse sidebar-submenu">
            <a
              href="#"
              class="list-group-item list-group-item-action bg-dark text-white"
            >
              <span class="menu-collapsed">Settings</span>
            </a>
            <a
              href="#"
              class="list-group-item list-group-item-action bg-dark text-white"
            >
              <span class="menu-collapsed">Password</span>
            </a>
          </div>
          <a href="#" class="bg-dark list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span class="fa fa-tasks fa-fw mr-3"></span>
              <span class="menu-collapsed">Tasks</span>
            </div>
          </a>
          <!-- Separator with title -->
          <li
            class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed"
          >
            <small>Cài đặt</small>
          </li>
          <!-- /END Separator -->
          <a href="#" class="bg-dark list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span class="fa fa-calendar fa-fw mr-3"></span>
              <span class="menu-collapsed">Calendar</span>
            </div>
          </a>
          <a href="#" class="bg-dark list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span class="fa fa-envelope-o fa-fw mr-3"></span>
              <span class="menu-collapsed"
                >Messages
                <span class="badge badge-pill badge-primary ml-2">5</span></span
              >
            </div>
          </a>
          <!-- Separator without title -->
          <li class="list-group-item sidebar-separator menu-collapsed"></li>
          <!-- /END Separator -->
          <a href="#" class="bg-dark list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span class="fa fa-question fa-fw mr-3"></span>
              <span class="menu-collapsed">Help</span>
            </div>
          </a>
          <a
            href="#"
            data-toggle="sidebar-colapse"
            class="bg-dark list-group-item list-group-item-action d-flex align-items-center"
          >
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span id="collapse-icon" class="fa fa-2x mr-3"></span>
              <span id="collapse-text" class="menu-collapsed">Collapse</span>
            </div>
          </a>
        </ul>
        <!-- List Group END-->
      </div>
      <!-- MAIN -->
      <div class="col py-2">
        <div class="row element-button">
          <div class="col px-3 py-1 pr-1">
            <a
              href="{% url 'QLthietbi_app:render_trangchinh' %}"
              class="btn btn-dark"
              ><i class="fa fa-angle-double-left" aria-hidden="true"></i> Trở
              lại</a
            >
            <a
              href="{% url 'QLthietbi_app:render_chinhsuathietbi' thietbi.id_thiet_bi %}"
              class="btn btn-dark"
              data-target="#suathietbiModal"
              data-toggle="modal"
              ><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Chỉnh
              sửa</a
            >
            <a
              class="btn btn-dark"
              data-target="#confirmDelete1ctModal-{{ pk }}"
              data-toggle="modal"
              ><i class="fa fa-trash-o" aria-hidden="true"></i> Xóa thiết bị</a
            >
          </div>
          <div class="col-12 p-md-2">
            <div class="card">
              <div class="card-content">
                <div class="card-body">
                  <h5 class="card-title bg-dark text-white text-center">
                    <br /><i
                      class="fa fa-info-circle fa-lg"
                      aria-hidden="true"
                    ></i
                    >&nbsp Thông tin chi tiết thiết bị {{ pk }}<br /><br />
                  </h5>
                  {% comment %}
                  <p class="card-text">Thông tin chi tiết thiết bị</p>
                  {% endcomment %}
                  <div class="form-row">
                    <div class="form-group col-md-3 mb-0">
                      <li style="font-size: 20px">
                        <strong>Tên thiết bị:</strong> &nbsp{{ thietbi.ten_thiet_bi }}
                      </li>
                      <li style="font-size: 20px">
                        <strong>Trạng thái:</strong> &nbsp
                        <!-- Format keep -->
                        {% if thietbi.tinh_trang == "hoatdong" %}
                        <!-- Format keep -->
                        <span class="badge badge-success"
                          ><i class="fa fa-signal" aria-hidden="true"></i> Hoạt
                          động</span
                        >
                        {% elif thietbi.tinh_trang == "dangbaotri" %}
                        <span class="badge badge-warning"
                          ><i
                            class="fa fa-cog fa-spin fa-fw"
                            aria-hidden="true"
                          ></i>
                          Bảo trì</span
                        >
                        {% else %}
                        <span class="badge badge-danger"
                          ><i
                            class="fa fa-spinner fa-pulse fa-fw"
                            aria-hidden="true"
                          ></i>
                          Hỏng</span
                        >
                        {% endif %}
                      </li>
                      <li style="font-size: 20px">
                        <strong>Hình ảnh:</strong>
                      </li>
                    </div>
                    <div class="form-group col-md-3 mb-0">
                      <li style="font-size: 20px">
                        <strong>Lần cuối bảo trì:</strong> &nbsp
                        <!-- Format keep -->
                        {{ ngay_bao_tri_str }}
                        <!-- Format keep -->
                      </li>
                      <li style="font-size: 20px">
                        <!-- Format keep -->
                        <strong>Vị trí:</strong>&nbsp Tầng {{ thietbi.tang }},&nbsp Phòng {{thietbi.phong }}
                        <!-- Format keep -->
                      </li>
                    </div>
                    <div class="form-group col-md-3 mb-0">
                      <li style="font-size: 20px">
                        <strong>Giá mua:</strong> &nbsp{{ gia_mua_str }} VNĐ
                      </li>
                      <li style="font-size: 20px">
                        <strong>Ngày mua:</strong> &nbsp{{ ngay_mua_str }}
                      </li>
                    </div>
                    <div class="form-group col-md-3 mb-0">
                      <li style="font-size: 20px">
                        <strong>Loại:</strong> &nbsp{{ thietbi.loai_thiet_bi }}
                      </li>
                      <li style="font-size: 20px">
                        <strong>Đơn vị cung cấp:</strong> &nbsp
                        <!-- Format keep -->
                        {{ thietbi.don_vi_cung_cap }}
                        <!-- Format keep -->
                      </li>
                    </div>
                  </div>
                  <br />
                  <div class="form-row">
                    <div class="form-group col-md-6 mb-0">
                      <img
                        src="{{thietbi.hinh_anh.url}}"
                        alt="Hình ảnh thiết bị"
                        width="600"
                        height="600"
                      />
                    </div>
                    <div class="form-group col-md-6 mb-0 mt-5">
                      <li style="font-size: 20px">
                        <strong>Mô tả:</strong> &nbsp{{ thietbi.mo_ta }}
                      </li>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
      $("#suathietbiform #id_tang").change(function () {
        var url = $("#suathietbiform").attr("data-device-url");
        var tangId = $(this).val();
        if (tangId == "") {
          $("#suathietbiform #id_phong").html(
            "<option value=''>---------</option>"
          );
          return;
        }
        $.ajax({
          url: url,
          data: {
            tang_id: tangId,
          },
          success: function (data) {
            $("#suathietbiform #id_phong").html(data);
          },
        });
      });
      $.when($("#suathietbiform #id_tang").trigger("change")).done(function (
        sua_data
      ) {
        console.log(sua_data);
      });
    </script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
    <script>
      // Hide submenus
      $("#body-row .collapse").collapse("hide");

      // Collapse/Expand icon
      $("#collapse-icon").addClass("fa-angle-double-left");

      // Collapse click
      $("[data-toggle=sidebar-colapse]").click(function () {
        SidebarCollapse();
      });

      function SidebarCollapse() {
        $(".menu-collapsed").toggleClass("d-none");
        $(".sidebar-submenu").toggleClass("d-none");
        $(".submenu-icon").toggleClass("d-none");
        $("#sidebar-container").toggleClass(
          "sidebar-expanded sidebar-collapsed"
        );

        // Treating d-flex/d-none on separators with title
        var SeparatorTitle = $(".sidebar-separator-title");
        if (SeparatorTitle.hasClass("d-flex")) {
          SeparatorTitle.removeClass("d-flex");
        } else {
          SeparatorTitle.addClass("d-flex");
        }

        // Collapse/Expand icon
        $("#collapse-icon").toggleClass(
          "fa-angle-double-left fa-angle-double-right"
        );
      }
    </script>
  </body>
</html>
